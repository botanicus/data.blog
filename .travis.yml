# https://docs.travis-ci.com/user/languages/ruby
language: ruby
cache: bundler

rvm:
- 2.6.2

script:
- export SOURCE_COMMIT=$(git log --pretty=format:'%h' -n 1)
- git remote add github https://$GITHUB_PERSONAL_ACCESS_TOKEN@github.com/$TRAVIS_REPO_SLUG.git
- git fetch github
- rake build
- mv content ~
- git checkout github/content -b content
- rm -rf content && mv ~/content .
- git add content
- git commit content -m "Generated from $SOURCE_COMMIT, build $TRAVIS_BUILD_NUMBER"; true
- git push github content

# https://docs.travis-ci.com/user/notifications
notifications:
  email: false
